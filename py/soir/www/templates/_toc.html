{% if members and members|length > 0 %}
{# Desktop TOC - sticky sidebar #}
<nav class="toc toc-inline" id="toc" aria-label="Table of contents">
    {% if doc %}
    <div class="toc-section">
        <h4><a href="#overview">Overview</a></h4>
    </div>
    {% endif %}

    {% for type, group in members|groupby('type') %}
    <div class="toc-section">
        <h4><a href="#section-{{ type }}">{{ type|capitalize }}</a></h4>
        <ul>
            {% for member in group %}
            <li><a href="#{{ member.name }}" title="{{ member.name }}">{{ member.name|truncate_toc }}</a></li>
            {% endfor %}
        </ul>
    </div>
    {% endfor %}
</nav>

{# Mobile TOC - always visible on small screens #}
<nav class="toc toc-mobile" aria-label="Table of contents">
    <ul>
        {% if doc %}
        <li><a href="#overview">Overview</a></li>
        {% endif %}
        {% for type, group in members|groupby('type') %}
        <li><a href="#section-{{ type }}">{{ type|capitalize }}</a></li>
        {% for member in group %}
        <li><a href="#{{ member.name }}">{{ member.name|truncate_toc }}</a></li>
        {% endfor %}
        {% endfor %}
    </ul>
</nav>
{% endif %}
